# SPDX-FileCopyrightText: 2025 Blitz <73762869+BlitzTheSquishy@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 Cami <147159915+Camdot@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 Eris <eris@erisws.com>
# SPDX-FileCopyrightText: 2025 sleepyyapril <123355664+sleepyyapril@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 sleepyyapril <flyingkarii@gmail.com>
#
# SPDX-License-Identifier: AGPL-3.0-or-later AND MIT

- type: entity
  parent: BaseGameRule
  id: Changeling
  categories: [ HideSpawnMenu ] # TheDen - Removes from spawn menu
  components:
  - type: ChangelingRule
  - type: GameRule
    minPlayers: 150
  - type: AntagObjectives
    objectives:
    - ChangelingStealDNAObjective
    - EscapeIdentityObjective
    - ChangelingSurviveObjective
  - type: AntagSelection
    selectionTime: PostPlayerSpawn
    agentName: changeling-roundend-name
    definitions:
    - prefRoles: [ Changeling ]
      min: 0
      max: 0
      playerRatio: 12
      lateJoinAdditional: true
      mindRoles:
      - MindRoleChangeling

- type: entity
  parent: BaseGameRule
  id: Devil
  components:
  - type: DevilRule
  - type: GameRule
    minPlayers: 15
  - type: AntagObjectives
    objectives:
    - DevilContractObjective
  - type: AntagSelection
    selectionTime: PostPlayerSpawn
    agentName: devil-roundend-name
    definitions:
    - prefRoles: [ Devil ]
      max: 2
      playerRatio: 20
#      jobBlacklist: [ Chaplain, Mime ] # Chaplain is obvious. Mime can't write.
      mindRoles:
      - DevilMindRole
      startingGear: DevilStartingGear
#  - type: Tag
#    tags:
#    - RoundstartAntag

# Blob
# - type: entity
#   id: BlobRule
#   parent: BaseGameRule
#   categories: [ HideSpawnMenu ]
#   components:
#   - type: BlobRule

# - type: entity
#   id: BlobGameMode
#   parent: BaseGameRule
#   categories: [ HideSpawnMenu ]
#   components:
#   - type: BlobRule
#   - type: GameRule
#     minPlayers: 15
#     delay: # 7-10 minutes
#       min: 420
#       max: 600
#   - type: AntagSelection
#     definitions:
#     - prefRoles: [ Blob ]
#       min: 1
#       max: 2
#       playerRatio: 40 #players = 2 blobs
#       allowNonHumans: true
#       blacklist:
#         components:
#         - AntagImmune
#       briefing:
#         text: blob-carrier-role-greeting
#         color: Plum
#         sound: /Audio/Announcements/bloblarm.ogg
#       mindRoles:
#       - MindRoleBlob

# - type: entity
#   id: BlobSpawn
#   parent: BaseGameRule
#   categories: [ HideSpawnMenu ]
#   components:
#   - type: StationEvent
#     weight: 15
#     duration: 1
#     earliestStart: 50
#     minimumPlayers: 20
#     maxOccurrences: 2
#   - type: BlobSpawnRule
#     carrierBlobProtos:
#     - SpawnPointGhostBlobRat
#     playersPerCarrierBlob: 30
#     maxCarrierBlob: 1
