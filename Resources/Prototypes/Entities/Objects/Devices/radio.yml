# SPDX-FileCopyrightText: 2020 Bright0
# SPDX-FileCopyrightText: 2020 DrSmugleaf
# SPDX-FileCopyrightText: 2020 Paul Ritter
# SPDX-FileCopyrightText: 2021 Swept
# SPDX-FileCopyrightText: 2022 Leon Friedrich
# SPDX-FileCopyrightText: 2022 themias
# SPDX-FileCopyrightText: 2023 Kara
# SPDX-FileCopyrightText: 2023 deltanedas
# SPDX-FileCopyrightText: 2024 DEATHB4DEFEAT
# SPDX-FileCopyrightText: 2024 Nemanja
# SPDX-FileCopyrightText: 2025 sleepyyapril
#
# SPDX-License-Identifier: MIT AND AGPL-3.0-or-later

- type: entity
  name: handheld radio
  description: A handy handheld radio. Has a clip so you can hang it on the neck of your uniform.
  parent: BaseItem
  id: RadioHandheld
  components:
  - type: TelecomExempt
  - type: RadioMicrophone
    broadcastChannel: Handheld
    toggleOnInteract: false
    frequency: 1330
  - type: RadioSpeaker
    toggleOnInteract: false
    channels:
    - Handheld
  - type: Speech
    speechVerb: Robotic
  - type: Sprite
    sprite: Objects/Devices/communication.rsi
    layers:
    - state: walkietalkie-off # TheDen - The bottom layer has all the lights off
    - state: walkietalkie-broadcasting # TheDen - The red light on the side turns on when the mic's on
      map: ["enum.RadioDeviceVisualLayers.Broadcasting"]
      shader: unshaded
      visible: false
    - state: walkietalkie-on # TheDen - The screen turns on when the speaker's on
      map: ["enum.RadioDeviceVisualLayers.Speaker"]
      shader: unshaded
      visible: false
    state: walkietalkie
  - type: Item
    sprite: Objects/Devices/communication.rsi
    heldPrefix: walkietalkie
  - type: Tag
    tags:
    - Radio
  - type: ActivatableUI
    key: enum.HandheldRadioUiKey.Key
  - type: UserInterface
    interfaces:
      enum.HandheldRadioUiKey.Key:
        type: HandheldRadioBoundUserInterface
  - type: Appearance # TheDen
  - type: GenericVisualizer # TheDen
    visuals:
      enum.RadioDeviceVisuals.Broadcasting:
        enum.RadioDeviceVisualLayers.Broadcasting:
          True: { visible: true }
          False: { visible: false }
      enum.RadioDeviceVisuals.Speaker:
        enum.RadioDeviceVisualLayers.Speaker:
          True: { visible: true }
          False: { visible: false }
  - type: Clothing # TheDen - To allow equipping radios on the neck slot
    slots: [neck]
    equipDelay: 0.3
    unequipDelay: 0.3
    quickEquip: false # Would conflict

- type: entity
  name: security radio
  description: A handy security radio. Has a clip so you can hang it on the neck of your uniform.
  parent: [ BaseSecurityContraband, RadioHandheld ]
  id: RadioHandheldSecurity
  components:
  - type: RadioMicrophone
    broadcastChannel: Security
    frequency: 1359 # TheDen - Frequencies don't matter for security radios at all, but this is at least the frequency that the security channel supposedly exists on
  - type: RadioSpeaker
    channels:
    - Security
  - type: Sprite
    sprite: Objects/Devices/securityhandy.rsi
  - type: Item
    sprite: Objects/Devices/securityhandy.rsi
    heldPrefix: walkietalkie
