# SPDX-FileCopyrightText: 2021 Kara D
# SPDX-FileCopyrightText: 2021 Pieter-Jan Briers
# SPDX-FileCopyrightText: 2021 Swept
# SPDX-FileCopyrightText: 2021 Vera Aguilera Puerto
# SPDX-FileCopyrightText: 2022 Fooberticus Bazly
# SPDX-FileCopyrightText: 2022 Myctai
# SPDX-FileCopyrightText: 2022 Peptide90
# SPDX-FileCopyrightText: 2022 Rane
# SPDX-FileCopyrightText: 2022 fooberticus
# SPDX-FileCopyrightText: 2023 Danger Revolution!
# SPDX-FileCopyrightText: 2023 DangerRevoltion
# SPDX-FileCopyrightText: 2023 Errant
# SPDX-FileCopyrightText: 2023 Kara
# SPDX-FileCopyrightText: 2023 Vordenburg
# SPDX-FileCopyrightText: 2023 sneb
# SPDX-FileCopyrightText: 2024 lzk
# SPDX-FileCopyrightText: 2024 themias
# SPDX-FileCopyrightText: 2025 Skubman
# SPDX-FileCopyrightText: 2025 sleepyyapril
#
# SPDX-License-Identifier: MIT AND AGPL-3.0-or-later

# Moles calculation
#
#   moles = 1000 / (8.31446261 * 293.15 / volume)
#
#   More practically:
#
#   moles = volume * 0.41027581
#
#   Yes, you do need all those digits or your pressure wont end up exactly 1000
#
#
# The number 1000 comes from the default MaxReleasePressure for a GasCanister,
# which is 10 * Atmospherics.OneAtmosphere, rounded down.
#
# 8.31446261 is the universal gas constant
#
# 293.15 is our default atmospheric temperature
#

# If you change the mole amounts, you can calculate the new gas supply times with:
# minutes = (moles / outputPressure) * 325

- type: entity
  id: OxygenTankFilled
  parent: OxygenTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 21.3
    air:
      # 31 minutes
      volume: 5
      moles:
        Oxygen: 2.051379050
      temperature: 293.15

- type: entity
  id: EmergencyOxygenTankFilled
  parent: EmergencyOxygenTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 21.3
    air:
      # 4 minutes
      volume: 0.66
      moles:
        Oxygen: 0.270782035
      temperature: 293.15

- type: entity
  id: EmergencyNitrogenTankFilled
  parent: EmergencyNitrogenTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 21.3
    air:
      # 4 minutes
      volume: 0.66
      moles:
        Nitrogen: 0.270782035
      temperature: 293.15

- type: entity
  id: EmergencyPlasmaTankFilled
  parent: EmergencyPlasmaTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 5.325
    air:
      # 16 minutes with Plasmaman lungs
      volume: 0.66
      moles:
        Plasma: 0.270782035
      temperature: 293.15

- type: entity
  id: ExtendedEmergencyOxygenTankFilled
  parent: ExtendedEmergencyOxygenTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 21.3
    air:
      # 9 minutes
      volume: 1.5
      moles:
        Oxygen: 0.615413715
      temperature: 293.15

- type: entity
  id: ExtendedEmergencyNitrogenTankFilled
  parent: ExtendedEmergencyNitrogenTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 21.3
    air:
      # 9 minutes
      volume: 1.5
      moles:
        Nitrogen: 0.615413715
      temperature: 293.15

- type: entity
  id: ExtendedEmergencyPlasmaTankFilled
  parent: ExtendedEmergencyPlasmaTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 5.325
    air:
      # 37 minutes with Plasmaman lungs
      volume: 1.5
      moles:
        Plasma: 0.615413715
      temperature: 293.15

- type: entity
  id: DoubleEmergencyOxygenTankFilled
  parent: DoubleEmergencyOxygenTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 21.3
    air:
      # 15 minutes
      volume: 2.5
      moles:
        Oxygen: 1.025689525
      temperature: 293.15

- type: entity
  id: DoubleEmergencyNitrogenTankFilled
  parent: DoubleEmergencyNitrogenTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 21.3
    air:
      # 15 minutes
      volume: 2.5
      moles:
        Nitrogen: 1.025689525
      temperature: 293.15

- type: entity
  id: DoubleEmergencyPlasmaTankFilled
  parent: DoubleEmergencyPlasmaTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 5.325
    air:
      # 62 minutes with Plasmaman lungs
      volume: 1.5
      moles:
        Plasma: 1.025689525
      temperature: 293.15

- type: entity
  id: EmergencyFunnyOxygenTankFilled
  parent: EmergencyFunnyOxygenTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 22.4
    air:
      # 4 minutes
      volume: 0.66
      moles:
        Oxygen: 0.270782035 # 95%
        NitrousOxide: 0.014251686 # 5%
        # 0.285033721       total
      temperature: 293.15

- type: entity
  id: AirTankFilled
  parent: AirTank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 101.3
    air:
      # 6 minutes due to output pressure
      volume: 5
      moles:
        Oxygen: 0.451303391 # 22%
        Nitrogen: 1.600075659 # 78%
        # 2.051379050       total
      temperature: 293.15

- type: entity
  id: NitrogenTankFilled
  parent: NitrogenTank
  suffix: Filled
  name: nitrogen tank
  components:
  - type: GasTank
    air:
      # 31 minutes
      volume: 5
      moles:
        Nitrogen: 2.051379050
      temperature: 293.15

- type: entity
  id: NitrousOxideTankFilled
  parent: NitrousOxideTank
  suffix: Filled
  name: nitrous oxide tank
  components:
  - type: GasTank
    #      0.21  | % oxygen in normal atmosphere
    #  /   0.7   | % oxygen in this mixture
    #  * 101.325 | one atmosphere
    # __________
    #    30.3975   optimal output pressure
    outputPressure: 30.4
    air:
      # only 22 minutes due to pressure
      volume: 5
      moles:
        Oxygen: 1.435965335 # 70%
        NitrousOxide: 0.615413715 # 30%
        # 2.051379050       total
      temperature: 293.15

- type: entity
  id: PlasmaTankFilled
  parent: PlasmaTank
  name: plasma tank
  suffix: Filled
  components:
  - type: GasTank
    outputPressure: 5.325
    air:
      # 125.2 minutes with Plasmaman lungs
      volume: 5
      moles:
        Plasma: 2.051379050
      temperature: 293.15
