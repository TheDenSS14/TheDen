- type: entity
  parent: [Clothing, ContentsExplosionResistanceBase]
  id: ClothingSackSurvival
  name: sack
  description: A handwoven storage option for the material-denied.
  components:
  - type: Sprite
    sprite: _DEN/Unrefined/Objects/Clothing/cloth_sack.rsi
    state: icon
  - type: Item
    size: Large
  - type: Clothing
    quickEquip: false
    slots:
    - back
    - belt
  - type: Storage
    grid:
    - 0,0,3,3
    maxItemSize: Large
  - type: ContainerContainer
    containers:
      storagebase: !type:Container
        ents: []
  - type: UserInterface
    interfaces:
      enum.StorageUiKey.Key:
        type: StorageBoundUserInterface
  # to prevent bag open/honk spam
  - type: UseDelay
    delay: 0.5
  - type: ExplosionResistance
    damageCoefficient: 0.9
  - type: AllowsSleepInside # DeltaV - enable sleeping inside bags
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.25,-0.25,0.25,0.25"
        density: 35
        mask:
        - ItemMask
        restitution: 0.3
        friction: 0.2
        
- type: entity
  parent: ClothingSackSurvival
  id: ClothingSackSurvivalLeather
  components:
  - type: Sprite
    sprite: _DEN/Unrefined/Objects/Clothing/leather_sack.rsi
    
- type: entity
  parent: ClothingSackSurvival
  id: ClothingSackSurvivalLootSack
  suffix: loot
  components:
  - type: EntityTableContainerFill
    containers:
      storagebase: !type:NestedSelector
        tableId: FillLootSack

- type: entity
  parent: ClothingSackSurvivalLootSack
  id: ClothingSackSurvivalLootSackLeather
  suffix: loot
  components:
  - type: Sprite
    sprite: _DEN/Unrefined/Objects/Clothing/leather_sack.rsi
  
- type: entityTable
  id: FillLootSack
  table: !type:GroupSelector
    children:
    - !type:NestedSelector
      tableId: RandomLootSackTable1
    - !type:NestedSelector
      tableId: RandomLootSackTable2
    - !type:NestedSelector
      tableId: RandomLootSackTable3
      
- type: entityTable
  id: RandomLootSackTable1
  table: !type:AllSelector
    children:
    - !type:NestedSelector
      tableId: RandomLootSackWeaponTable
    - !type:NestedSelector
      tableId: RandomLootSackMaterialTable
    - !type:NestedSelector
      tableId: RandomLootSackFoodTable
    - !type:NestedSelector
      tableId: RandomLootSackFoodTable
      
- type: entityTable
  id: RandomLootSackWeaponTable
  table: !type:GroupSelector
    children:
    - id: CopperKnife
      weight: 10
    - id: SteelKnife
    - id: HardStoneKnife

- type: entityTable
  id: RandomLootSackMaterialTable
  table: !type:GroupSelector
    children:
    - id: HardStone1
    - id: ClayLump1
    - id: DirtLump1
    - id: MaterialLeather1
    - id: MaterialCloth1
    - id: MaterialWoodPlank1
    
- type: entityTable
  id: RandomLootSackFoodTable
  table: !type:GroupSelector
    children:
    - id: FoodCarrot
    - id: FoodApple
    - id: FoodMushroom
    - id: FoodMeatCooked
      weight: 3
      
- type: entityTable
  id: RandomLootSackTable2
  table: !type:AllSelector
    children:
    - !type:NestedSelector
      tableId: RandomLootSackToolTable
    - !type:NestedSelector
      tableId: RandomLootSackMagicTable
    - !type:NestedSelector
      tableId: RandomLootSackDrinkTable
      
- type: entityTable
  id: RandomLootSackToolTable
  table: !type:GroupSelector
    children:
    - id: MiniHoeCopper
    - id: ToolClippersCopper
    - id: VellumMap
    - id: Firesteel
    
- type: entityTable
  id: RandomLootSackMagicTable
  table: !type:GroupSelector
    children:
    - id: StoneRune
      weight: 40
    - id: MagicRune
    - !type:NestedSelector
      tableId: MagicEssenceTable
    
- type: entityTable
  id: RandomLootSackDrinkTable
  table: !type:GroupSelector
    children:
    - id: DrinkMug
    - id: DrinkMugMetal
    - id: DrinkFlaskOld
    - id: DrinkMREFlask
      weight: 3
      
- type: entityTable
  id: RandomLootSackTable3
  table: !type:AllSelector
    children:
    - !type:NestedSelector
      tableId: RandomLootSackDrinkTable
    - !type:NestedSelector
      tableId: RandomLootSackFoodTable
    - !type:NestedSelector
      tableId: RandomLootSackSeedTable
    - !type:NestedSelector
      tableId: RandomLootSackSeedTable
      
- type: entityTable
  id: RandomLootSackSeedTable
  table: !type:GroupSelector
    children:
    - id: AppleSeeds
    - id: WheatSeeds
    - id: CottonSeeds
    - id: CornSeeds