- type: entity
  id: BasePile
  abstract: true
  components:
  - type: SpriteFade
  - type: Clickable
  - type: Sprite
    sprite: _DEN/Unrefined/Structures/World/piles.rsi
    noRot: true
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.15,-0.2,0.15,0.2"
        density: 1000
        layer:
        - WallLayer
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Metallic
  - type: MeleeSound
    soundGroups:
      Brute:
        path: /Audio/Effects/chop.ogg
        params:
          variation: 0.05
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 80
      behaviors:
        - !type:SolutionExplosionBehavior
          solution: pile
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
          
- type: entity
  parent: BasePile
  id: SoilPile
  name: soil pile
  description: A surfaced mound of soil ripe for shovelling.
  components:
  - type: Sprite
    state: soil_pile
  - type: Construction
    graph: DigUpPileSoil
    node: pile
    
- type: entity
  parent: BasePile
  id: SoilPileNiter
  name: soil pile
  suffix: niter
  description: A surfaced mound of soil ripe for shovelling. Whitish specks can be seen.
  components:
  - type: Sprite
    state: soil_pile
  - type: Construction
    graph: DigUpPileSoilNiter
    node: pile

- type: entity
  parent: BasePile
  id: SoilPileSulfur
  name: soil pile
  suffix: sulfur
  description: A surfaced mound of soil ripe for shovelling. Yellowish specks can be seen.
  components:
  - type: Sprite
    state: soil_pile
  - type: Construction
    graph: DigUpPileSoilSulfur
    node: pile

- type: entity
  parent: BasePile
  id: ClayPile
  name: clay pile
  description: A surfaced mound of clay ripe for shovelling.
  components:
  - type: Sprite
    state: clay_pile
  - type: Construction
    graph: DigUpPileClay
    node: pile

- type: entity
  parent: SoilPile
  id: OldSoilPile
  name: old soil pile
  description: A surfaced mound of soil. Looks rather dusty...
  components:
  - type: Construction
    graph: DigUpPileUndead
    node: pile

- type: entity
  parent: BasePile
  id: MagicPile
  name: oleomagium spill
  description: A surfaced mound of semi-solid magic, ripe for shovelling?
  components:
  - type: Sprite
    state: oleomagium_spill
  - type: Construction
    graph: DigUpPileMagic
    node: pile
  - type: PointLight
  - type: Explosive
    explosionType: Default
    totalIntensity: 30

- type: entity
  id: PuddleOleoSpill
  parent: Puddle
  categories: [ HideSpawnMenu ]
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: Oleomagium
          Quantity: 10
          
- type: entity
  id: PuddleNiterSpill
  parent: Puddle
  suffix: Potassium
  categories: [ HideSpawnMenu ]
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: Potassium
          Quantity: 10
          
- type: entity
  id: PuddleSulfurSpill
  parent: Puddle
  suffix: Sulfur
  categories: [ HideSpawnMenu ]
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: Sulfur
          Quantity: 10

- type: entityTable
  id: GrasslandsPiles
  table: !type:GroupSelector
    children:
    - !type:GroupSelector
      weight: 100
      children:
      - id: SoilPile
      - id: ClayPile
    - !type:GroupSelector
      weight: 20
      children:
      - id: SoilPileSulfur
      - id: SoilPileNiter      
    - !type:GroupSelector
      weight: 5
      children:
      - id: OldSoilPile
      - id: MagicPile
      
- type: entity
  name: pile spawner
  id: SpawnerGrasslandsPiles
  parent: MarkerBase
  suffix: Grasslands
  components:
  - type: Sprite
    sprite: _DEN/Unrefined/Structures/World/piles.rsi
    state: soil_pile
  - type: EntityTableSpawner
    table: !type:NestedSelector
      tableId: GrasslandsPiles
  placement:
    mode: AlignTileAny